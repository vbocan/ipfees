@page "{id}"
@model DataCollectModel
@{
    ViewData["Title"] = "Data Collection";
}

<h1>Data Collection</h1>
<form asp-page="Result" method="post">
    <div class="col-md-9">
        @foreach (var v in Model.Vars)
        {
            switch (v)
            {
                case DslVariableList:
                    var v1 = (DslVariableList)v;
                    <label class="form-label" for="@v1.Name">@v1.Text</label>
                    <select class="form-select form-select-lg mb-3" name="@v1.Name" id="@v1.Name">
                        @foreach (var item in v1.Items)
                        {
                            if (v1.DefaultSymbol.Equals(item.Symbol))
                            {
                                <option selected value="@item.Symbol">@item.Value</option>
                            }
                            else
                            {
                                <option value="@item.Symbol">@item.Value</option>
                            }
                        }
                    </select>                    
                    break;
                case DslVariableNumber:
                    var v2 = (DslVariableNumber)v;
                    <div class="mb-3 col-md-6">
                        <label class="form-label" for="@v2.Name">@v2.Text</label>
                        <input class="form-control" type="number" id="@v2.Name" name="@v2.Name" value="@v2.DefaultValue" min="@v2.MinValue" max="@v2.MaxValue">
                    </div>
                    break;
                case DslVariableBoolean:
                    var v3 = (DslVariableBoolean)v;
                    <div class="mb-3 form-check">
                        <label class="form-check-label" for="@v3.Name">@v3.Text</label>
                        @if (v3.DefaultValue)
                        {
                            <input class="form-check-input" type="checkbox" id="@v3.Name" name="@v3.Name" value="true" checked>
                            <input type="hidden" name="@v3.Name" value="false">
                        }
                        else
                        {
                            <input class="form-check-input" type="checkbox" id="@v3.Name" name="@v3.Name" value="true">
                            <input type="hidden" name="@v3.Name" value="false">
                        }
                    </div>
                    break;
            }
        }
        <button type="submit" class="btn btn-primary">Compute Result</button>
    </div>
</form>