@page
@using IPFees.Core;
@using static IPFees.Core.FeeCalculator;
@model ResultModel
@{
    ViewData["Title"] = "Calculation Result";
}

<h1>Calculation Results</h1>

<div class="row">
    <div class="alert alert-danger" role="alert">
        <strong>TODO:</strong> Convert currencies into @Model.TargetCurrency!
    </div>
    <div class="col-lg-12">
        Amounts expressed in @Model.TargetCurrency
        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col">Jurisdiction</th>
                    <th scope="col">Language</th>
                    <th scope="col">Official Fee</th>
                    <th scope="col">Partner Fee</th>
                    <th scope="col">Service Fee</th>
                    <th scope="col">Translation Fee</th>
                    <th scope="col">TOTAL</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var f in Model.FeeResults.JurisdictionFees)
                {
                    <tr>
                        <th scope="row">@f.Jurisdiction</th>
                        <td>[LANG]</td>
                        <td>@f.OfficialFee</td>
                        <td>@f.PartnerFee</td>
                        <td>@f.ServiceFee</td>
                        <td>@f.TranslationFee</td>
                        <td>@f.TotalFee</td>
                    </tr>
                }
                <tr>
                    <th scope="row">---</th>
                    <td>---</td>
                    <td>@Model.FeeResults.TotalOfficialFee</td>
                    <td>@Model.FeeResults.TotalPartnerFee</td>
                    <td>@Model.FeeResults.TotalServiceFee</td>
                    <td>@Model.FeeResults.TotalTranslationFee</td>
                    <td>@Model.FeeResults.GrandTotalFee</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="col-lg-12">
        <h3>Errors</h3>
        @foreach (var er in @Model.FeeResults.Errors)
        {
            <h4>@($"There are {er.Errors.Count()} errors at fee {er.FeeName}")</h4>
            <ul>
                @foreach (var e in er.Errors)
                {
                    <li>@e</li>
                }
            </ul>
        }
    </div>
</div>
